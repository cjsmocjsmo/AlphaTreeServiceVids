import { getAttribute, hasAttribute, getTagName } from "@web/parse5-utils";
import { isStylesheetLink } from "./extract-assets.js";
const tagsWithSrcSet = /* @__PURE__ */ new Set(["img", "source"]);
function startsWithSrcRoot(pathname, srcRoot, srcRootWeb) {
  return pathname.startsWith(srcRoot) || pathname.startsWith(srcRootWeb) || `/${pathname}`.startsWith(srcRoot);
}
function isInSrcDirectory(node, attr, srcRoot, srcRootWeb) {
  const value = getAttribute(node, attr);
  return value ? startsWithSrcRoot(value, srcRoot, srcRootWeb) : false;
}
function isAstroInjectedLink(node) {
  return isStylesheetLink(node) && getAttribute(node, "data-astro-injected") === "";
}
function isBuildableLink(node, srcRoot, srcRootWeb) {
  if (isAstroInjectedLink(node)) {
    return true;
  }
  const href = getAttribute(node, "href");
  if (typeof href !== "string" || !href.length) {
    return false;
  }
  return startsWithSrcRoot(href, srcRoot, srcRootWeb);
}
function isBuildableImage(node, srcRoot, srcRootWeb) {
  if (getTagName(node) === "img") {
    const src = getAttribute(node, "src");
    return src ? startsWithSrcRoot(src, srcRoot, srcRootWeb) : false;
  }
  return false;
}
function hasSrcSet(node) {
  return tagsWithSrcSet.has(getTagName(node)) && !!getAttribute(node, "srcset");
}
function isHoistedScript(node) {
  return getTagName(node) === "script" && hasAttribute(node, "hoist");
}
export {
  hasSrcSet,
  isAstroInjectedLink,
  isBuildableImage,
  isBuildableLink,
  isHoistedScript,
  isInSrcDirectory
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL3ZpdGUtcGx1Z2luLWJ1aWxkLWh0bWwvdXRpbC50cyJdLAogICJtYXBwaW5ncyI6ICJBQUFBO0FBRUE7QUFFQSxNQUFNLGlCQUFpQixvQkFBSSxJQUFJLENBQUMsT0FBTyxRQUFRLENBQUM7QUFFaEQsMkJBQTJCLFVBQWtCLFNBQWlCLFlBQTZCO0FBQzFGLFNBQ0MsU0FBUyxXQUFXLE9BQU8sS0FDM0IsU0FBUyxXQUFXLFVBQVUsS0FDOUIsSUFBSSxXQUFXLFdBQVcsT0FBTztBQUVuQztBQUVPLDBCQUEwQixNQUFzQixNQUFjLFNBQWlCLFlBQTZCO0FBQ2xILFFBQU0sUUFBUSxhQUFhLE1BQU0sSUFBSTtBQUNyQyxTQUFPLFFBQVEsa0JBQWtCLE9BQU8sU0FBUyxVQUFVLElBQUk7QUFDaEU7QUFFTyw2QkFBNkIsTUFBK0I7QUFDbEUsU0FBTyxpQkFBaUIsSUFBSSxLQUFLLGFBQWEsTUFBTSxxQkFBcUIsTUFBTTtBQUNoRjtBQUVPLHlCQUF5QixNQUFzQixTQUFpQixZQUE2QjtBQUNuRyxNQUFJLG9CQUFvQixJQUFJLEdBQUc7QUFDOUIsV0FBTztBQUFBLEVBQ1I7QUFFQSxRQUFNLE9BQU8sYUFBYSxNQUFNLE1BQU07QUFDdEMsTUFBSSxPQUFPLFNBQVMsWUFBWSxDQUFDLEtBQUssUUFBUTtBQUM3QyxXQUFPO0FBQUEsRUFDUjtBQUVBLFNBQU8sa0JBQWtCLE1BQU0sU0FBUyxVQUFVO0FBQ25EO0FBRU8sMEJBQTBCLE1BQXNCLFNBQWlCLFlBQTZCO0FBQ3BHLE1BQUksV0FBVyxJQUFJLE1BQU0sT0FBTztBQUMvQixVQUFNLE1BQU0sYUFBYSxNQUFNLEtBQUs7QUFDcEMsV0FBTyxNQUFNLGtCQUFrQixLQUFLLFNBQVMsVUFBVSxJQUFJO0FBQUEsRUFDNUQ7QUFDQSxTQUFPO0FBQ1I7QUFFTyxtQkFBbUIsTUFBK0I7QUFDeEQsU0FBTyxlQUFlLElBQUksV0FBVyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsYUFBYSxNQUFNLFFBQVE7QUFDN0U7QUFFTyx5QkFBeUIsTUFBK0I7QUFDOUQsU0FBTyxXQUFXLElBQUksTUFBTSxZQUFZLGFBQWEsTUFBTSxPQUFPO0FBQ25FOyIsCiAgIm5hbWVzIjogW10KfQo=
