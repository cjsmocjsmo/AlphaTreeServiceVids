async function onMedia(astroId, options, getHydrateCallback) {
  const roots = document.querySelectorAll(`astro-root[uid="${astroId}"]`);
  if (roots.length === 0) {
    throw new Error(`Unable to find the root for the component ${options.name}`);
  }
  let innerHTML = null;
  let fragment = roots[0].querySelector(`astro-fragment`);
  if (fragment == null && roots[0].hasAttribute("tmpl")) {
    let template = roots[0].querySelector(`template[data-astro-template]`);
    if (template) {
      innerHTML = template.innerHTML;
      template.remove();
    }
  } else if (fragment) {
    innerHTML = fragment.innerHTML;
  }
  const cb = async () => {
    const hydrate = await getHydrateCallback();
    for (const root of roots) {
      hydrate(root, innerHTML);
    }
  };
  if (options.value) {
    const mql = matchMedia(options.value);
    if (mql.matches) {
      cb();
    } else {
      mql.addEventListener("change", cb, { once: true });
    }
  }
}
export {
  onMedia as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vc3JjL3J1bnRpbWUvY2xpZW50L21lZGlhLnRzIl0sCiAgIm1hcHBpbmdzIjogIkFBS0EsdUJBQXNDLFNBQWlCLFNBQXlCLG9CQUF3QztBQUN2SCxRQUFNLFFBQVEsU0FBUyxpQkFBaUIsbUJBQW1CLFdBQVc7QUFDdEUsTUFBSSxNQUFNLFdBQVcsR0FBRztBQUN2QixVQUFNLElBQUksTUFBTSw2Q0FBNkMsUUFBUSxNQUFNO0FBQUEsRUFDNUU7QUFFQSxNQUFJLFlBQTJCO0FBQy9CLE1BQUksV0FBVyxNQUFNLEdBQUcsY0FBYyxnQkFBZ0I7QUFDdEQsTUFBSSxZQUFZLFFBQVEsTUFBTSxHQUFHLGFBQWEsTUFBTSxHQUFHO0FBR3RELFFBQUksV0FBVyxNQUFNLEdBQUcsY0FBYywrQkFBK0I7QUFDckUsUUFBSSxVQUFVO0FBQ2Isa0JBQVksU0FBUztBQUNyQixlQUFTLE9BQU87QUFBQSxJQUNqQjtBQUFBLEVBQ0QsV0FBVyxVQUFVO0FBQ3BCLGdCQUFZLFNBQVM7QUFBQSxFQUN0QjtBQUVBLFFBQU0sS0FBSyxZQUFZO0FBQ3RCLFVBQU0sVUFBVSxNQUFNLG1CQUFtQjtBQUN6QyxlQUFXLFFBQVEsT0FBTztBQUN6QixjQUFRLE1BQU0sU0FBUztBQUFBLElBQ3hCO0FBQUEsRUFDRDtBQUVBLE1BQUksUUFBUSxPQUFPO0FBQ2xCLFVBQU0sTUFBTSxXQUFXLFFBQVEsS0FBSztBQUNwQyxRQUFJLElBQUksU0FBUztBQUNoQixTQUFHO0FBQUEsSUFDSixPQUFPO0FBQ04sVUFBSSxpQkFBaUIsVUFBVSxJQUFJLEVBQUUsTUFBTSxLQUFLLENBQUM7QUFBQSxJQUNsRDtBQUFBLEVBQ0Q7QUFDRDsiLAogICJuYW1lcyI6IFtdCn0K
