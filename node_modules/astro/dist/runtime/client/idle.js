async function onIdle(astroId, options, getHydrateCallback) {
  const cb = async () => {
    const roots = document.querySelectorAll(`astro-root[uid="${astroId}"]`);
    if (roots.length === 0) {
      throw new Error(`Unable to find the root for the component ${options.name}`);
    }
    let innerHTML = null;
    let fragment = roots[0].querySelector(`astro-fragment`);
    if (fragment == null && roots[0].hasAttribute("tmpl")) {
      let template = roots[0].querySelector(`template[data-astro-template]`);
      if (template) {
        innerHTML = template.innerHTML;
        template.remove();
      }
    } else if (fragment) {
      innerHTML = fragment.innerHTML;
    }
    const hydrate = await getHydrateCallback();
    for (const root of roots) {
      hydrate(root, innerHTML);
    }
  };
  if ("requestIdleCallback" in window) {
    window.requestIdleCallback(cb);
  } else {
    setTimeout(cb, 200);
  }
}
export {
  onIdle as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vc3JjL3J1bnRpbWUvY2xpZW50L2lkbGUudHMiXSwKICAibWFwcGluZ3MiOiAiQUFNQSxzQkFBcUMsU0FBaUIsU0FBeUIsb0JBQXdDO0FBQ3RILFFBQU0sS0FBSyxZQUFZO0FBQ3RCLFVBQU0sUUFBUSxTQUFTLGlCQUFpQixtQkFBbUIsV0FBVztBQUN0RSxRQUFJLE1BQU0sV0FBVyxHQUFHO0FBQ3ZCLFlBQU0sSUFBSSxNQUFNLDZDQUE2QyxRQUFRLE1BQU07QUFBQSxJQUM1RTtBQUVBLFFBQUksWUFBMkI7QUFDL0IsUUFBSSxXQUFXLE1BQU0sR0FBRyxjQUFjLGdCQUFnQjtBQUN0RCxRQUFJLFlBQVksUUFBUSxNQUFNLEdBQUcsYUFBYSxNQUFNLEdBQUc7QUFHdEQsVUFBSSxXQUFXLE1BQU0sR0FBRyxjQUFjLCtCQUErQjtBQUNyRSxVQUFJLFVBQVU7QUFDYixvQkFBWSxTQUFTO0FBQ3JCLGlCQUFTLE9BQU87QUFBQSxNQUNqQjtBQUFBLElBQ0QsV0FBVyxVQUFVO0FBQ3BCLGtCQUFZLFNBQVM7QUFBQSxJQUN0QjtBQUNBLFVBQU0sVUFBVSxNQUFNLG1CQUFtQjtBQUV6QyxlQUFXLFFBQVEsT0FBTztBQUN6QixjQUFRLE1BQU0sU0FBUztBQUFBLElBQ3hCO0FBQUEsRUFDRDtBQUVBLE1BQUkseUJBQXlCLFFBQVE7QUFDcEMsSUFBQyxPQUFlLG9CQUFvQixFQUFFO0FBQUEsRUFDdkMsT0FBTztBQUNOLGVBQVcsSUFBSSxHQUFHO0FBQUEsRUFDbkI7QUFDRDsiLAogICJuYW1lcyI6IFtdCn0K
